{"version":3,"file":"component---node-modules-sudaraka-94-gatsby-theme-novela-src-templates-article-template-tsx-content-file-path-content-posts-2024-06-06-neural-network-from-scratch-index-mdx-4b9bc2016ce76754460f.js","mappings":"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","sources":["webpack://novela-blog/./content/posts/2024-06-06-neural-network-from-scratch/index.mdx","webpack://novela-blog/./node_modules/@sudaraka94/gatsby-theme-novela/src/templates/article.template.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    span: \"span\",\n    h2: \"h2\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"Learning how AI works on a deeper level has always been in my bucket list. I found this amazing video by \", React.createElement(_components.a, {\n    href: \"https://x.com/karpathy\",\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, \"Andrej Karpathy\"), \"\\nwhich walks you through the process of creating an autograd engine first and then move on to create a very basic Neural Network. So here is my\\nexperience following the video.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<a class='gatsby-remark-link-unfurl__container' href='https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;VMj-3S1tku0&amp;list&#x3D;PLAqhIrjkxbuWI23v9cThsA9GvCAUhRvKZ' target='_blank' title='The spelled-out intro to neural networks and backpropagation: building micrograd'><div class='gatsby-remark-link-unfurl__media' style='background-image: url(https:&#x2F;&#x2F;i.ytimg.com&#x2F;vi&#x2F;VMj-3S1tku0&#x2F;maxresdefault.jpg)'></div><div class='gatsby-remark-link-unfurl__content'>  <header class='gatsby-remark-link-unfurl__title'><p  title='The spelled-out intro to neural networks and backpropagation: building micrograd'>The spelled-out intro to neural networks and backpropagation: building micrograd</p></header>  <div class='gatsby-remark-link-unfurl__description'><p title='This is the most step-by-step spelled-out explanation of backpropagation and training of neural networks. It only assumes basic knowledge of Python and a vag...'>This is the most step-by-step spelled-out explanation of backpropagation and training of neural networks. It only assumes basic knowledge of Python and a vag...</p></div>  <footer><p title='YouTube'>YouTube</p><span title='YouTube' style='background-image: url(https:&#x2F;&#x2F;www.youtube.com&#x2F;s&#x2F;desktop&#x2F;c01ea7e3&#x2F;img&#x2F;logos&#x2F;favicon_144x144.png); background-repeat: no-repeat; background-position: center center;'></span></footer></div></a>\"\n    }\n  })), \"\\n\", React.createElement(_components.h2, null, \"Autograd Engine\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 791px; \\\"\\n    >\\n      <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 49%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABv0lEQVR42l1S15KjMBDk/7/K61rjWhubLIICYBBLdgBEMMin8t097HbN06SumW7p9QZ/h0DTcwPVVvAYnn/Tr+K+6rACUTsvr1+QRkpLy5ySZF1F63rUvCjOzlbgB3QcB8b6zU6jaa656a2bfg8XADRFAbbbqiyrslBBdNDJTg1V04/jCyFIPsOjjr+srL738zTyF++nbpwZ51xqAECKEsgygjAKg71iX2hpeIluI89zMUabnZpmlQmL8tr1beuFjhvaHrX7uZNK1xXMniybhiGGTZ8edCxrkeUGmqa6DjgagWII5vTWDn3XbfcbEiEYOw92E8w2Op3w52eAyeUSfp1dHGWaE2sWRNAnGH/s9TDJDf/N3LXjMnw3SfnIVr5IheNeq8qR5bqub9daMcnZDmWVGDaqqzJN6fYANJscrLS5M3FqkMG4JFGOwxxJDONcPQ0Y8WkWD7T8GEX5GcS0uK3rvK6LYuIwzlWv6MZViNcNrQg2dmzspQn6T4KZZc2UimLLOKFtXAxC1WXhQr97/8LJg1bTNPPnk/+Q6p9J+NsP5awoLYKj6zBgi+8s3+l0PLYBGYHNgMOa5m2d/xv+AB6gH/wHEnxkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/830490164d7b1b9cb24a1eeabb655f85/507e6/nn.webp 200w,\\n/static/830490164d7b1b9cb24a1eeabb655f85/28a80/nn.webp 400w,\\n/static/830490164d7b1b9cb24a1eeabb655f85/6cf43/nn.webp 791w\\\"\\n              sizes=\\\"(max-width: 791px) 100vw, 791px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/830490164d7b1b9cb24a1eeabb655f85/36ca5/nn.png 200w,\\n/static/830490164d7b1b9cb24a1eeabb655f85/a3397/nn.png 400w,\\n/static/830490164d7b1b9cb24a1eeabb655f85/6b6ec/nn.png 791w\\\"\\n            sizes=\\\"(max-width: 791px) 100vw, 791px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/830490164d7b1b9cb24a1eeabb655f85/6b6ec/nn.png\\\"\\n            alt=\\\"nn\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.a, {\n    href: \"https://cs231n.github.io/neural-networks-1/\",\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, \"image source\")), \"\\n\", React.createElement(_components.p, null, \"A Neural Network is basically a graph. once we give an input, the neural network returns an output. Each of these neurons have certain parameters\\nwhich impacts the output directly. We train neural networks to output a desired value by tweaking these parameters in neurons. But how can we derive\\nthe parameter values that could cause the neural network to output the desired value?.\"), \"\\n\", React.createElement(_components.p, null, \"Turns out, old friend calculus comes to help here. We can approximate the impact of a certain parameter on the output of the Neural Network, by\\ncalculating the gradient of the parameter with respect to the output.\"), \"\\n\", React.createElement(_components.p, null, \"Autograd engine helps us to build a Neural Network (modeled as a graph), and easily do backpropagation to calculate the gradients of each parameter.\\nHence the name Autograd Engine.\"), \"\\n\", React.createElement(_components.h2, null, \"Tiny Grad\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<a class='gatsby-remark-link-unfurl__container' href='https:&#x2F;&#x2F;github.com&#x2F;sudaraka94&#x2F;tinygrad' target='_blank' title='GitHub - sudaraka94&#x2F;tinygrad: A tiny scalar valued autograd engine with neural net library build using vanilla python'><div class='gatsby-remark-link-unfurl__media' style='background-image: url(https:&#x2F;&#x2F;opengraph.githubassets.com&#x2F;5f1089867520e11e42a34a20ec0b51028cfffe01f5c183fdbb7af98eadda3223&#x2F;sudaraka94&#x2F;tinygrad)'></div><div class='gatsby-remark-link-unfurl__content'>  <header class='gatsby-remark-link-unfurl__title'><p  title='GitHub - sudaraka94&#x2F;tinygrad: A tiny scalar valued autograd engine with neural net library build using vanilla python'>GitHub - sudaraka94&#x2F;tinygrad: A tiny scalar valued autograd engine with neural net library build using vanilla python</p></header>  <div class='gatsby-remark-link-unfurl__description'><p title='A tiny scalar valued autograd engine with neural net library build using vanilla python  - GitHub - sudaraka94&#x2F;tinygrad: A tiny scalar valued autograd engine with neural net library build using van...'>A tiny scalar valued autograd engine with neural net library build using vanilla python  - GitHub - sudaraka94&#x2F;tinygrad: A tiny scalar valued autograd engine with neural net library build using van...</p></div>  <footer><p title='GitHub'>GitHub</p><span title='GitHub' style='background-image: url(https:&#x2F;&#x2F;github.githubassets.com&#x2F;favicons&#x2F;favicon.svg); background-repeat: no-repeat; background-position: center center;'></span></footer></div></a>\"\n    }\n  })), \"\\n\", React.createElement(_components.p, null, \"Tiny grad is the engine I build. This is a very basic Auto Grad engine which\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Supports implementing Simple Neural networks\"), \"\\n\", React.createElement(_components.li, null, \"Only works with scalaer inputs\"), \"\\n\", React.createElement(_components.li, null, \"Supports backpropagating through the neural network and calculating gradient values for each parameter\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"I did a tiny experiment with tinygrad, where I created a simple neural netowrk and trained it to predict a given\\ninput. I was simply playing with a set of numbers, but it was quite fun. You can find my jupyter notebook below,\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<a class='gatsby-remark-link-unfurl__container' href='https:&#x2F;&#x2F;github.com&#x2F;sudaraka94&#x2F;tinygrad&#x2F;blob&#x2F;main&#x2F;tinygrad.ipynb' target='_blank' title='tinygrad&#x2F;tinygrad.ipynb at main · sudaraka94&#x2F;tinygrad'><div class='gatsby-remark-link-unfurl__media' style='background-image: url(https:&#x2F;&#x2F;opengraph.githubassets.com&#x2F;5f1089867520e11e42a34a20ec0b51028cfffe01f5c183fdbb7af98eadda3223&#x2F;sudaraka94&#x2F;tinygrad)'></div><div class='gatsby-remark-link-unfurl__content'>  <header class='gatsby-remark-link-unfurl__title'><p  title='tinygrad&#x2F;tinygrad.ipynb at main · sudaraka94&#x2F;tinygrad'>tinygrad&#x2F;tinygrad.ipynb at main · sudaraka94&#x2F;tinygrad</p></header>  <div class='gatsby-remark-link-unfurl__description'><p title='A tiny scalar valued autograd engine with neural net library build using vanilla python  - sudaraka94&#x2F;tinygrad'>A tiny scalar valued autograd engine with neural net library build using vanilla python  - sudaraka94&#x2F;tinygrad</p></div>  <footer><p title='GitHub'>GitHub</p><span title='GitHub' style='background-image: url(https:&#x2F;&#x2F;github.githubassets.com&#x2F;favicons&#x2F;favicon.svg); background-repeat: no-repeat; background-position: center center;'></span></footer></div></a>\"\n    }\n  })), \"\\n\", React.createElement(_components.h2, null, \"Micrograd\"), \"\\n\", React.createElement(_components.p, null, \"The tinygrad engine is mostly inspired by Andrej Karpathi’s Micrograd, Autograd Engine.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<a class='gatsby-remark-link-unfurl__container' href='https:&#x2F;&#x2F;github.com&#x2F;karpathy&#x2F;micrograd' target='_blank' title='GitHub - karpathy&#x2F;micrograd: A tiny scalar-valued autograd engine and a neural net library on top of it with PyTorch-like API'><div class='gatsby-remark-link-unfurl__media' style='background-image: url(https:&#x2F;&#x2F;opengraph.githubassets.com&#x2F;913f60ab4142b62842b4a982dda3257d9dd41cf45a3c4173023d6215d12a0c45&#x2F;karpathy&#x2F;micrograd)'></div><div class='gatsby-remark-link-unfurl__content'>  <header class='gatsby-remark-link-unfurl__title'><p  title='GitHub - karpathy&#x2F;micrograd: A tiny scalar-valued autograd engine and a neural net library on top of it with PyTorch-like API'>GitHub - karpathy&#x2F;micrograd: A tiny scalar-valued autograd engine and a neural net library on top of it with PyTorch-like API</p></header>  <div class='gatsby-remark-link-unfurl__description'><p title='A tiny scalar-valued autograd engine and a neural net library on top of it with PyTorch-like API - karpathy&#x2F;micrograd'>A tiny scalar-valued autograd engine and a neural net library on top of it with PyTorch-like API - karpathy&#x2F;micrograd</p></div>  <footer><p title='GitHub'>GitHub</p><span title='GitHub' style='background-image: url(https:&#x2F;&#x2F;github.githubassets.com&#x2F;favicons&#x2F;favicon.svg); background-repeat: no-repeat; background-position: center center;'></span></footer></div></a>\"\n    }\n  })), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://miro.medium.com/v2/resize:fit:700/0*AONVmd3v4wO_dWr6\",\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, \"article banner source\")));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/sudaraka94.github.io/sudaraka94.github.io/content/posts/2024-06-06-neural-network-from-scratch/index.mdx\";\nimport React, {useRef, useState, useEffect} from \"react\";\nimport styled from \"@emotion/styled\";\nimport throttle from \"lodash/throttle\";\nimport {graphql, useStaticQuery} from \"gatsby\";\nimport Layout from \"@components/Layout\";\nimport MDXRenderer from \"@components/MDX\";\nimport Progress from \"@components/Progress\";\nimport Section from \"@components/Section\";\nimport mediaqueries from \"@styles/media\";\nimport {debounce} from \"@utils\";\nimport ArticleAside from \"../sections/article/Article.Aside\";\nimport ArticleHero from \"../sections/article/Article.Hero\";\nimport ArticleControls from \"../sections/article/Article.Controls\";\nimport ArticlesNext from \"../sections/article/Article.Next\";\nimport ArticleSEO from \"../sections/article/Article.SEO\";\nimport ArticleShare from \"../sections/article/Article.Share\";\nimport ArticleFooter from './article.footer.template';\nconst siteQuery = graphql`\n  {\n    allSite {\n      edges {\n        node {\n          siteMetadata {\n            name\n          }\n        }\n      }\n    }\n  }\n`;\nconst Article = ({pageContext, location, children}) => {\n  const contentSectionRef = useRef(null);\n  const [hasCalculated, setHasCalculated] = useState(false);\n  const [contentHeight, setContentHeight] = useState(0);\n  const results = useStaticQuery(siteQuery);\n  const name = results.allSite.edges[0].node.siteMetadata.name;\n  const {article, authors, next} = pageContext;\n  useEffect(() => {\n    const calculateBodySize = throttle(() => {\n      const contentSection = contentSectionRef.current;\n      if (!contentSection) return;\n      if (!hasCalculated) {\n        const debouncedCalculation = debounce(calculateBodySize);\n        const $imgs = contentSection.querySelectorAll(\"img\");\n        $imgs.forEach($img => {\n          if (!$img.complete) $img.onload = debouncedCalculation;\n        });\n        setHasCalculated(true);\n      }\n      setContentHeight(contentSection.getBoundingClientRect().height);\n    }, 20);\n    calculateBodySize();\n    window.addEventListener(\"resize\", calculateBodySize);\n    return () => window.removeEventListener(\"resize\", calculateBodySize);\n  }, []);\n  return React.createElement(Layout, null, React.createElement(ArticleSEO, {\n    article: article,\n    authors: authors,\n    location: location\n  }), React.createElement(ArticleHero, {\n    article: article,\n    authors: authors\n  }), React.createElement(ArticleAside, {\n    contentHeight: contentHeight\n  }, React.createElement(Progress, {\n    contentHeight: contentHeight\n  })), React.createElement(MobileControls, null, React.createElement(ArticleControls)), React.createElement(ArticleBody, {\n    ref: contentSectionRef\n  }, React.createElement(MDXRenderer, null, React.createElement(ArticleShare), children)), React.createElement(ArticleFooter, {\n    pageContext: pageContext\n  }), next.length > 0 && React.createElement(NextArticle, {\n    narrow: true\n  }, React.createElement(FooterNext, null, \"More articles from \", name), React.createElement(ArticlesNext, {\n    articles: next\n  }), React.createElement(FooterSpacer)));\n};\nArticle\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(Article, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nconst MobileControls = (styled.div)`\n  position: relative;\n  padding-top: 60px;\n  transition: background 0.2s linear;\n  text-align: center;\n\n  ${(mediaqueries.tablet_up)`\n    display: none;\n  `}\n`;\nconst ArticleBody = (styled.article)`\n  position: relative;\n  padding: 160px 0 35px;\n  padding-left: 68px;\n  transition: background 0.2s linear;\n\n  ${(mediaqueries.desktop)`\n    padding-left: 53px;\n  `}\n  \n  ${(mediaqueries.tablet)`\n    padding: 70px 0 80px;\n  `}\n\n  ${(mediaqueries.phablet)`\n    padding: 60px 0;\n  `}\n`;\nconst NextArticle = (styled(Section))`\n  display: block;\n`;\nconst FooterNext = (styled.h3)`\n  position: relative;\n  opacity: 0.25;\n  margin-bottom: 100px;\n  font-weight: 400;\n  color: ${p => p.theme.colors.primary};\n\n  ${(mediaqueries.tablet)`\n    margin-bottom: 60px;\n  `}\n\n  &::after {\n    content: '';\n    position: absolute;\n    background: ${p => p.theme.colors.grey};\n    width: ${810 / 1140 * 100}%;\n    height: 1px;\n    right: 0;\n    top: 11px;\n\n    ${(mediaqueries.tablet)`\n      width: ${600 / 1140 * 100}%;\n    `}\n\n    ${(mediaqueries.phablet)`\n      width: ${400 / 1140 * 100}%;\n    `}\n\n    ${(mediaqueries.phone)`\n      width: 90px\n    `}\n  }\n`;\nconst FooterSpacer = (styled.div)`\n  margin-bottom: 65px;\n`;\n"],"names":["_createMdxContent","props","_components","Object","assign","p","a","span","h2","ul","li","_provideComponents","components","React","href","target","rel","dangerouslySetInnerHTML","__html","wrapper","MDXLayout","Article","_ref","pageContext","location","children","contentSectionRef","useRef","hasCalculated","setHasCalculated","useState","contentHeight","setContentHeight","name","useStaticQuery","allSite","edges","node","siteMetadata","article","authors","next","useEffect","calculateBodySize","throttle","contentSection","current","debouncedCalculation","debounce","querySelectorAll","forEach","$img","complete","onload","getBoundingClientRect","height","window","addEventListener","removeEventListener","Layout","ArticleSEO","ArticleHero","ArticleAside","Progress","MobileControls","ArticleControls","ArticleBody","ref","MDXRenderer","ArticleShare","ArticleFooter","length","NextArticle","narrow","FooterNext","ArticlesNext","articles","FooterSpacer","GatsbyMDXWrapper","GATSBY_COMPILED_MDX","_styled","mediaqueries","tablet_up","_templateObject","_taggedTemplateLiteralLoose","desktop","_templateObject2","tablet","_templateObject3","phablet","_templateObject4","Section","styles","theme","colors","primary","_templateObject5","grey","_templateObject6","_templateObject7","phone","_templateObject8"],"sourceRoot":""}